{{ define "main" }}
<main class="container mx-auto max-w-7xl my-4">
  <h1 class="text-2xl mt-3 mb-6 pl-6 font-bold dark:text-white">{{.Title}}</h1>
  <div class="bg-white dark:bg-neutral-800 rounded-xl mx-3 mb-16 px-2 dark:text-white">
    <div class="p-8 lg:px-20 pb-28 prose prose-sm max-w-none lg:prose-lg dark:prose-invert">
      <div class="mb-6">{{.Content}}</div>

      {{ with .Params.authors }}
      <div class="mt-8 border-t border-neutral-200 dark:border-neutral-700 pt-8">
        {{ range . }}
        {{ $authorName := . }}
        {{ $authorPage := site.GetPage (printf "/authors/%s" ($authorName | urlize)) }}
        {{ if $authorPage }}
        <div class="mb-6 flex items-start gap-4">
          {{ if $authorPage.Params.avatar }}
          <a href="{{ $authorPage.RelPermalink }}" class="shrink-0">
            <img src="{{ $authorPage.Params.avatar | relURL }}" alt="{{ $authorName }}" class="w-16 h-16 rounded-full object-cover border-2 border-white dark:border-neutral-600">
          </a>
          {{ end }}
          <div class="flex-1">
            <div class="flex items-center justify-between">
              <h3 class="text-lg font-bold dark:text-white">
                <a href="{{ $authorPage.RelPermalink }}" class="hover:underline">{{ $authorName }}</a>
              </h3>
              <div class="flex gap-2">
                {{ with $authorPage.Params.social }}
                {{ with .twitter }}<a href="{{ . }}" target="_blank" rel="noopener noreferrer" class="text-neutral-400 hover:text-cyan-600">
                  <svg fill="currentColor" class="h-5 w-5" viewBox="0 0 24 24"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
                </a>{{ end }}
                {{ with .website }}<a href="{{ . }}" target="_blank" rel="noopener noreferrer" class="text-neutral-400 hover:text-cyan-600">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>
                </a>{{ end }}
                {{ end }}
              </div>
            </div>
            <div class="text-sm text-neutral-600 dark:text-neutral-300 mt-1">
              {{ $authorPage.Content | truncate 200 }}
            </div>
          </div>
        </div>
        {{ end }}
        {{ end }}
      </div>
      {{ end }}

      {{ partial "comments.html" . }}
    </div>
  </div>
</main>
{{ end }}
